<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Load Report Viewer</title>
	<link rel=stylesheet type=text/css href="bootstrap.min.css">

	<!-- jQuery library -->
	<script src="jquery.min.js"></script>

	<!-- Latest compiled JavaScript -->
	<script src="bootstrap.min.js"></script>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script>
		var remaining;
		var remainingTimeout;

		function reload() {
			$.ajax({
				url: "/main-container",
				cache: false,
				success: function(data) {
					clearTimeout(remainingTimeout);
					$("#main-container").html(data);
					remaining = 20;
					update_remaining();
				}
			});
		}

		function update_remaining() {
			remaining--;
			if (remaining <= 0) {
				document.getElementById('pre-remaining').innerHTML = "any time now.";
				if (remaining < 0) {
					document.getElementById('remaining').innerHTML = "(delayed by " + (-remaining);
					document.getElementById('post-remaining').innerHTML = "s)";
				}
				else {
					document.getElementById('remaining').innerHTML = "";
					document.getElementById('post-remaining').innerHTML = "";
				}
			} else {
				document.getElementById('pre-remaining').innerHTML = " in about ";
				document.getElementById('remaining').innerHTML = remaining;
				document.getElementById('post-remaining').innerHTML = " s";
			}
			remainingTimeout = setTimeout(update_remaining, 1000);
		}

		$(document).ready(function(){
			setInterval(reload, 20000);
			remaining = 20;
			update_remaining();
		});

	</script>
	<style>
		.top_spacing { margin-top:8px;}
		.top_spacing_2 { margin-top:16px;}
		td {word-break:break-all;}
	</style>

	</head>
	<body>
  {% block body %}{% endblock %}
	</body>

</html>
